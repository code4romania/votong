{% extends 'candidate/base.html' %}
{% load static %}
{% load i18n %}
{% load crispy_forms_tags %}

{% block domain-filters %}
{% endblock domain-filters %}

{% block extra-header %}
{% endblock extra-header %}

{% block left-side-view %}

{% if candidate %}
<div class="tabs is-medium">
  <ul>
    <li>
      <a href="{% url 'ngo-update' candidate.org.id %}">Profilul organizatiei</a>
    </li>
    <li class="is-active">
      <a href="{% url 'candidate-update' candidate.id %}">Candidatul meu</a>
    </li>
    <li><a href="#">Voturile mele</a></li>
  </ul>
</div>
{% endif %}

<h2 class="title border-b uppercase">Editeaza profil candidat</h2>

<a href="{% url 'candidate-detail' candidate.id %}">Vezi profilul public al candidatului</a>
<br><br>

<div class="container">
    {% if messages %}
        <article class="message is-success">
        <div class="message-body">
            {% for message in messages %}
                {{ message }}
            {% endfor %}
        </div>
        </article>
    {% else %}
        <form class="ces-form" method="post" enctype="multipart/form-data" id="candidate-update-form">
            {% csrf_token %}

            <p><b>Nume:</b> {{candidate.name}}</p>
            <br>

            {{ form.non_field_errors }}

            {% for hidden_field in form.hidden_fields %}
                {{ hidden_field.errors }}
            {% endfor %}

            {{ form|crispy }}

            <div class="has-text-right">
              <input class="button is-success is-medium" type="submit" value='{% trans "Update profile" %}'>
            </div>
        </form>
    {% endif %}
</div>

<hr />

{% if candidate.is_proposed %}

<div class="container has-text-centered">
  <a href="#" class="button is-danger is-medium" style="width: 100%;" onclick="$('#id_is_proposed').val('False'); $('#candidate-update-form').submit(); return false;">Retrage candidat</a>
</div>
{% else %}
<div class="container has-text-centered">
  <a href="#" class="button is-primary is-medium" style="width: 100%;" onclick="$('#id_is_proposed').val('True'); $('#candidate-update-form').submit(); return false;">Propune candidat</a>
</div>
{% endif %}

{% endblock %}
