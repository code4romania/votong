{% load i18n %}

<div class="upload-btn-wrapper">
    {% if not widget.attrs.readonly %}
        <button class="btn-upload"> <span><i class="fas fa-upload"></i></span> <span class="input-label">{% trans "Upload document" %}..</span></button>
        <input
          type="{{ widget.type }}"
          name="{{ widget.name }}"
          aria-label="{{ widget.name }}"
          {% include "../../django/forms/jinja2/django/forms/widgets/attrs.html" %}>
    {% endif %}
</div>

<script>
  $(document).ready(function () {
    let input = $('input[name="{{widget.name}}"]')

    let label = input.siblings().children(".input-label")
    let labelInitVal = label.html()

    input.on('change', function (e) {
      let fileName = e.target.value.split('\\').pop()

      if (fileName)
        label.html(fileName)
      else
        label.html(labelInitVal)
    });
  })
</script>
