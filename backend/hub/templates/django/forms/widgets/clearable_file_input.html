{% load i18n %}

<div class="upload-btn-wrapper">
    {% if not widget.attrs.readonly %}
        <button class="btn-upload"> <span><i class="fas fa-upload"></i></span> <span class="input-label">{% trans "Upload document" %}..</span></button>
        <input type="{{ widget.type }}" name="{{ widget.name }}" {% include "django/forms/widgets/attrs.html" %}>
    {% endif %}
</div>

<script>
$(document).ready(function() {
    var input = $('input[name="{{widget.name}}"]')

    var label = input.siblings().children(".input-label")
    var labelInitVal = label.html()

    input.on('change', function(e) {
        var fileName = e.target.value.split('\\').pop()

        if (fileName)
            label.html(fileName)
        else
            label.html(labelInitVal)
    });
})
</script>